openapi: 3.0.0
info:
  title: TestBuddy Telemetry Server API
  description: This the API specification for TestBuddy's telemetry server. It contains all the necessary information about how to upload usage data.
  contact:
    name: TU Delft Software Engineering Research Group
    url: https://se.ewi.tudelft.nl/
  version: 1.0.0 #API Version
servers:
  - url: https://testbuddy.ewi.tudelft.nl
paths:
  /usageData:
    description: Usage Data
    post:
      description: Operation to upload new usage data. Usage data records are uploaded in an array. This ensures that the endpoint supports both single and multiple entries. A list of all valid actions can be found under `/documentation/design/telemetry`. Furthermore the requests should include an MD5 hash to ensure that the requests are coming from an approved client. The hash is generated by hashing the contents of the request with a secret string appending.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: string
                  format: uuid
                  example: "123e4567-e89b-12d3-a456-426614174000"
                actionsRecorded:
                  type: array
                  items:
                    type: object
                    properties:
                      actionId:
                        type: string
                        example: "testAdd"
                      datetime:
                        type: string
                        format: date-time
                        example: "2021-12-03T10:15:30"
                hash:
                  type: string
                  example: "79054025255fb1a26e4bc422aef54eb4"
      responses:
        201:
          description: Successfully added the usage data.
        400:
          description: Invalid input. For example an invalid action id or a date-time with the wrong format.
        401:
          description: Unauthorized. The hash included in the request does not belong to an authorized client.
      tags:
        - Data collecting